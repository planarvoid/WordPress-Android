# Exploratory testing
- [ ] Grab your headphones and use our app for 30 minutes!
- [ ] Control playback using headphones built-in controls. Should be able to play/stop/move back and forth in any playlist


# Logging out and account switching
- [ ] Logging back in as another user (should not see any old data from previous user)
- [ ] Removing account via the system account settings should trigger app logout and remove data
- [ ] Sign up with app then delete account on website. Should present unauthorized access dialog on app


# Upgrade from Play Store
- [ ] The new version installs cleanly over the existing version in the Play Store
- [ ] Offline tracks downloaded on previous version remain available after upgrade


# Purchase Flow
**Checkout Flow**
 - Check out the `release` branch
 - Run `WebPaymentIntegrationTest` from Android Studio
 - Check that it passes
 - log in manually with user name: `scandsubscribe` and password `s0undcl0ud`, to confirm Go+ content, features & upsell status

 - [ ] Run checkout integration test on an emulator

**Reset test user status**
  - If you have payments role credentials: 
    1) Go to http://sonar.soundcloud.com/users/scandsubscribe/purchases
    1) Click "Terminate" under "Staging payment history" 
  - If you don't have above credentials:
    1) Go to Shared-Android folder in LastPass
    1) Name: Android Automated Payment User
    1) Make sure connected to the s-cloud VPN
    1) Run the command in the notes section in terminal
    1) To Validate command success go to the above link, and see the "Terminate" under "Staging payment history" is gone 

 - [ ] Reset test account subscription status



# Offline error states and retry logic
Visiting each section and verifying that the offline behavior seems sensible, covering various possible scenarios including:
pull to refresh, loading first page and subsequent pages on/offline where applicable, and retrying once internet is back online

- [ ] Likes
- [ ] Playlist and albums
- [ ] Recently played
- [ ] Discovery - Search
- [ ] Discovery - Stations
- [ ] Discovery - Charts
- [ ] Discovery - Recommended Tracks
- [ ] Discovery - Recommended Playlists


# Offline sync
- [ ] For unliked and unsynced playlist:
    - [ ] As a subscriber, clicking on the download icon will like and prepare the playlist for offline listening.
- [ ] For liked and synced playlist:
    - [ ] As a subscriber, clicking on the download icon will remove the playlist from offline listening, but will keep the playlist liked.
    - [ ] As a subscriber, clicking on the like toggle will unlike and remove the playlist from offline listening.
- [ ] As a non-subscriber, clicking on the download icon shows the conversion modal.


# Offline sync on SD card
- [ ] Using a device or an AVD with an SD card:
    - [ ] As a subscriber, sync liked tracks or a playlist to device storage (this is the default storage location).
    - [ ] Once synced, go to "Offline listening settings" and tap "Change storage location".
    - [ ] Select the "SD card" radio button, and tap "Ok, got it" on the "Change storage location?" dialog.
    - [ ] All tracks previously saved on device storage should now be re-downloaded to the SD card.


# Signup/login
Disclaimer: Do not perform those tests in your personal device as you might need to remove your account from it. Prefer test devices or use emulators.

- [ ] Sign up with an email (Note: you can use `yourname+something@soundcloud.com`)
 - [ ] User profile set image
 - [ ] User profile set name

- [ ] Sign up with Google
 - Prerequesite : A Google account for testing is setup on the device (you can use the following or create a new one *from web*)
   - username: `sclouder.mobile.test@gmail.com`, password: `SclouderTest1234`
 - Sign up with this account
 - Delete the account on [Sonar](http://sonar.soundcloud.com)
   - Look for the username -> click "View" -> gear button -> delete

- [ ] Sign up and in with Facebook installed app (important for Facebook SDK and platform changes (you can get the APK on APKMirror or similar for emulators))
 - Prerequesite : You are signed in the Facebook app with a testing account
 - Sign up with this account
 - Delete the account on [Sonar](http://sonar.soundcloud.com) (see above)

- [ ] Sign in or up by selecting from multiple Google accounts
 - Prerequesite : You need 2 Google accounts setup on your device.

- [ ] Forgot password
 - Enter a valid email address, receive email on how to reset your password
 - Enter an invalid email (get creative!) and see the error toast that this email doesn't exist


# Player
- [ ] Plays the track
- [ ] Scrubbing
- [ ] Share
- [ ] Repost
- [ ] Add comment
- [ ] Orientation change
- [ ] Execute `OfflinePlayerTest#testShowErrorWhenContentNotDownloaded` on a device in airplane mode


# Google Cast
**To test the Chromecast**

  - Grab the Chromecast from the Safe
  - On your Macbook:
    - Connect your computer to an ethernet connection
    - [Turn your mac into a Wifi Hotspot](https://www.howtogeek.com/214053/how-to-turn-your-mac-into-a-wi-fi-hotspot/)  
  - On the Chromecast:
    - Find a monitor that has an HDMI input (preferably also an audio output jack, the old Dell monitors are ideal)
    - Connect the Chromecast to the HDMI port and a power source
    - Hook up your headphones / massive speakers to the audio output port
  - On your phone:
    - Download Google Home
    - Open Google Home and Setup the Chromecast to point to your Macbook's HotSpot
    - Connect your phone to your MacBook's Wifi so your phone and the Chromecast are on the same network
  - Cast it up!
- - -

- [ ] Cast from player and from a MenuItem from any Toolbar in the app
    - [ ] Check the track position is reflected on the TV
    - [ ] Check the player state (playing/paused) is reflected on the TV
- [ ] Disconnect cast should pause playback
    - [ ] Immediately after disconnection, clicking on the "resume" button should continue playback from the point where cast stopped playing
- [ ] Volume control
- [ ] Auto track change (while having the player on foreground)
- [ ] Player manual track change (skip next/previous)
- [ ] Notification track change (skip next/previous)
- [ ] Lockscreen track change (skip next/previous)
- [ ] **Multicasting**: perform an exploratory test (play/pause, skip, seek, changing play queues) while having more than one device connected to the same Chromecast and observe if everything is in sync


# Lockscreen/notification controls + widget
- [ ] Liking/unliking via widget updates player
- [ ] Liking/unliking via player updates widget
- [ ] Widget/lockscreen/notification controls update player
- [ ] Player controls update widget/lockscreen/notification


# Activity
- [ ] New follower
- [ ] Like
- [ ] Repost
- [ ] New comment
- [ ] Orientation change
- [ ] "X new notifications" pill on screen start. Tapping the pill scrolls to top and shows new notifications.


# Sound Stream
- [ ] Update
- [ ] Orientation change
- [ ] "X new posts" pill on app start. Tapping the pill scrolls to top and shows new posts.


# Record
- [ ] record track
- [ ] edit recording
- [ ] play recording in record window
- [ ] see the recorded track in your profile -> Sounds


# Settings
- [ ] Analytics & Crashlogs

1. Set your phone up with [Charles proxy]( https://github.com/soundcloud/android-listeners/wiki/Debugging-Network-requests-with-Charles-from-your-Phone---Tablet)
2. Turn both Analytics and Crashlogs on in the SoundCloud app (`Settings > Basic Settings > Privacy`)
3. Clear the Charles console and restart the SoundCloud App
4. You should see requests to [b.scorecard.com] and [e.crashlytics.com]
5. Switch off Analytics and Crashlogs
6. Restart the app
7. You shouldn't see requests from [b.scorecard.com] and [e.crashlytics.com]
8. Sanity check by re-enabling Analytics and Crashlogs and seeing those requests appear again

- [ ] Cache clear

`Settings > Basic Settings > Clear application cache`

Should get "Cache cleared" success message


# Ads

We are not allowed to run the automated tests against the production ad server.
We can, however, locally trigger the automated tests on the release branch if we use the debug buildType.
To do this, checkout the release branch locally and run the tests in the `player.ads` package.

- [ ] Acceptance tests passed

Some things have to tested manually (release branch devDebug), using the same user as the acceptance tests (android_ad_user) please check that:

- [ ] Promoted track is shown in stream
- [ ] Promoted playlist is shown in stream
- [ ] Ad event tracking sent to EventLogger & Promoted (400 response is OK)
- [ ] Vertical video ads (deep-link [here](https://soundcloud.com/scandroidad1/sets/vertical-video-ad)) change & lock the player orientation to portrait
- [ ] Player orientation is no longer locked once ad has been skipped

**NOTE:** The availability of promoted stream items depends on several factors. Builds talking to api-mobile-alpha
will always get them. In beta and prod environments, frequency caps apply as well as geographic region.
The latter can be circumvented by being in the `cloud_people` feature group.


# Tracking
- [ ] Event tracking to EventGateway (check requests to https://telemetry.soundcloud.com)
- [ ] Event tracking to AppBoy (check requests to https://serpens.iad.appboy.com:443)
- [ ] Comscore tracking (check request to http://b.scorecardresearch.com)
- [ ] Adjust tracking (check request to https://app.adjust.io:443, after fresh install of the app)
- [ ] Changing users will change the user ID we send with Analytics requests (look at "user" for EventGateway)


# Age Gating
You can use the test users 'underage@sc.com' (pw: underage) and 'soundcloud.manual.ageless@tests.soundcloud' (pw: SoundCloudTest2016) to perform these tests
**Please don't change their ages so we can keep using them specifically for this test**

- [ ] With an user which has an age inferior to 18 years old (depending on the country this might change, for example, 14 in Germany), attempt to follow the [annoymouse](http://sonar.soundcloud.com/users/annoymouse?query=32326572) user. You should not be able to follow the user and will be shown a notification.
- [ ] With an user which does not have its age defined, attempt to follow the [annoymouse](http://sonar.soundcloud.com/users/annoymouse?query=32326572) user. You should not be able to follow the user and will be prompted for your age (do not fill out the age data please!).


# Dev features
- [ ] Login with a non `cloud_people` user and verify the dev drawer is not there.
