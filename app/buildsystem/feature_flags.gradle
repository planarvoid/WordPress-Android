apply plugin: 'com.android.application'

def BOOLEAN = "boolean"
def TRUE = "true"
def FALSE = "false"

//Feature flags
def FEATURE_PAYMENTS_TEST = "FEATURE_PAYMENTS_TEST"
def FEATURE_OFFLINE_SYNC = "FEATURE_OFFLINE_SYNC"
def FEATURE_NEW_PROFILE = "FEATURE_NEW_PROFILE"
def FEATURE_FOLLOW_USER_SEARCH = "FEATURE_FOLLOW_USER_SEARCH"
def FEATURE_PLAY_RELATED_TRACKS = "FEATURE_PLAY_RELATED_TRACKS"
def FEATURE_STATIONS_SOFT_LAUNCH = "FEATURE_STATIONS_SOFT_LAUNCH"
def FEATURE_STATIONS_HOME = "FEATURE_STATIONS_HOME"
def FEATURE_EVENTLOGGER_AUDIO_V1 = "FEATURE_EVENTLOGGER_AUDIO_V1"
def FEATURE_RECOMMENDED_PLAYER_CONTEXT = "FEATURE_RECOMMENDED_PLAYER_CONTEXT"
def FEATURE_KILL_CONCURRENT_STREAMING = "FEATURE_KILL_CONCURRENT_STREAMING"
def FEATURE_COLLECTIONS = "FEATURE_COLLECTIONS"
def FEATURE_DAILY_POLICY_UPDATES = "FEATURE_DAILY_POLICY_UPDATES"
def FEATURE_APPBOY = "FEATURE_APPBOY"
def FEATURE_TABS = "FEATURE_TABS"
def FEATURE_NEW_STREAM = "FEATURE_NEW_STREAM"

/**
 * Discovery is a group of subfeatures which includes:
 *        - Search
 *        - Recommendations
 *        - Charts
 *        - Playlist discovery tags
 * By enabling FEATURE_DISCOVERY, by default, 'search' and 'playlist discovery' are enable so
 * in order for both FEATURE_DISCOVERY_RECOMMENDATIONS and FEATURE_DISCOVERY_CHARTS to work,
 * FEATURE_DISCOVERY must be switched on.
 *
 * FEATURE_DISCOVERY can be removed completely once we get rid of SearchActivity (this is meant
 * to happen within the new Tab Navigation approach).
 */
def FEATURE_DISCOVERY = "FEATURE_DISCOVERY"
def FEATURE_DISCOVERY_RECOMMENDATIONS = "FEATURE_DISCOVERY_RECOMMENDATIONS"
def FEATURE_DISCOVERY_CHARTS = "FEATURE_DISCOVERY_CHARTS"

android {
  buildTypes {
    alpha {
      //Feature flags enabled
      buildConfigField BOOLEAN, FEATURE_OFFLINE_SYNC, TRUE
      buildConfigField BOOLEAN, FEATURE_FOLLOW_USER_SEARCH, TRUE
      buildConfigField BOOLEAN, FEATURE_PLAY_RELATED_TRACKS, TRUE
      buildConfigField BOOLEAN, FEATURE_EVENTLOGGER_AUDIO_V1, TRUE
      buildConfigField BOOLEAN, FEATURE_DAILY_POLICY_UPDATES, TRUE
      buildConfigField BOOLEAN, FEATURE_APPBOY, TRUE
      buildConfigField BOOLEAN, FEATURE_NEW_PROFILE, TRUE
      buildConfigField BOOLEAN, FEATURE_COLLECTIONS, TRUE
      buildConfigField BOOLEAN, FEATURE_DISCOVERY, TRUE
      buildConfigField BOOLEAN, FEATURE_DISCOVERY_RECOMMENDATIONS, TRUE   //FEATURE_DISCOVERY must be enable as well
      buildConfigField BOOLEAN, FEATURE_STATIONS_SOFT_LAUNCH, TRUE

      //Feature flags disabled
      buildConfigField BOOLEAN, FEATURE_TABS, FALSE
      buildConfigField BOOLEAN, FEATURE_PAYMENTS_TEST, FALSE
      buildConfigField BOOLEAN, FEATURE_STATIONS_HOME, FALSE
      buildConfigField BOOLEAN, FEATURE_RECOMMENDED_PLAYER_CONTEXT, FALSE
      buildConfigField BOOLEAN, FEATURE_KILL_CONCURRENT_STREAMING, FALSE
      buildConfigField BOOLEAN, FEATURE_DISCOVERY_CHARTS, FALSE           //FEATURE_DISCOVERY must be enable as well
      buildConfigField BOOLEAN, FEATURE_NEW_STREAM, FALSE
    }

    beta {
      //Feature flags enabled
      buildConfigField BOOLEAN, FEATURE_PLAY_RELATED_TRACKS, TRUE
      buildConfigField BOOLEAN, FEATURE_APPBOY, TRUE
      buildConfigField BOOLEAN, FEATURE_NEW_PROFILE, TRUE

      //Feature flags disabled
      buildConfigField BOOLEAN, FEATURE_TABS, FALSE
      buildConfigField BOOLEAN, FEATURE_PAYMENTS_TEST, FALSE
      buildConfigField BOOLEAN, FEATURE_OFFLINE_SYNC, FALSE
      buildConfigField BOOLEAN, FEATURE_FOLLOW_USER_SEARCH, FALSE
      buildConfigField BOOLEAN, FEATURE_STATIONS_SOFT_LAUNCH, FALSE
      buildConfigField BOOLEAN, FEATURE_STATIONS_HOME, FALSE
      buildConfigField BOOLEAN, FEATURE_EVENTLOGGER_AUDIO_V1, FALSE
      buildConfigField BOOLEAN, FEATURE_RECOMMENDED_PLAYER_CONTEXT, FALSE
      buildConfigField BOOLEAN, FEATURE_KILL_CONCURRENT_STREAMING, FALSE
      buildConfigField BOOLEAN, FEATURE_COLLECTIONS, FALSE
      buildConfigField BOOLEAN, FEATURE_DAILY_POLICY_UPDATES, FALSE
      buildConfigField BOOLEAN, FEATURE_DISCOVERY, FALSE
      buildConfigField BOOLEAN, FEATURE_DISCOVERY_RECOMMENDATIONS, FALSE  //FEATURE_DISCOVERY must be enable as well
      buildConfigField BOOLEAN, FEATURE_DISCOVERY_CHARTS, FALSE           //FEATURE_DISCOVERY must be enable as well
      buildConfigField BOOLEAN, FEATURE_NEW_STREAM, FALSE
    }

    debug {
      //Feature flags enabled
      buildConfigField BOOLEAN, FEATURE_OFFLINE_SYNC, TRUE
      buildConfigField BOOLEAN, FEATURE_FOLLOW_USER_SEARCH, TRUE
      buildConfigField BOOLEAN, FEATURE_PLAY_RELATED_TRACKS, TRUE
      buildConfigField BOOLEAN, FEATURE_EVENTLOGGER_AUDIO_V1, TRUE
      buildConfigField BOOLEAN, FEATURE_STATIONS_SOFT_LAUNCH, TRUE
      buildConfigField BOOLEAN, FEATURE_STATIONS_HOME, TRUE
      buildConfigField BOOLEAN, FEATURE_NEW_PROFILE, TRUE
      buildConfigField BOOLEAN, FEATURE_DAILY_POLICY_UPDATES, TRUE
      buildConfigField BOOLEAN, FEATURE_APPBOY, TRUE

      //Feature flags disabled
      buildConfigField BOOLEAN, FEATURE_TABS, FALSE
      buildConfigField BOOLEAN, FEATURE_COLLECTIONS, FALSE
      buildConfigField BOOLEAN, FEATURE_PAYMENTS_TEST, FALSE
      buildConfigField BOOLEAN, FEATURE_RECOMMENDED_PLAYER_CONTEXT, FALSE
      buildConfigField BOOLEAN, FEATURE_KILL_CONCURRENT_STREAMING, FALSE
      buildConfigField BOOLEAN, FEATURE_DISCOVERY, FALSE
      buildConfigField BOOLEAN, FEATURE_DISCOVERY_RECOMMENDATIONS, FALSE  //FEATURE_DISCOVERY must be enable as well
      buildConfigField BOOLEAN, FEATURE_DISCOVERY_CHARTS, FALSE           //FEATURE_DISCOVERY must be enable as well
      buildConfigField BOOLEAN, FEATURE_NEW_STREAM, FALSE
    }

    end2end {
      //Feature flags enabled
      buildConfigField BOOLEAN, FEATURE_PAYMENTS_TEST, TRUE
      buildConfigField BOOLEAN, FEATURE_PLAY_RELATED_TRACKS, TRUE
      buildConfigField BOOLEAN, FEATURE_APPBOY, TRUE
      buildConfigField BOOLEAN, FEATURE_NEW_PROFILE, TRUE

      //Feature flags disabled
      buildConfigField BOOLEAN, FEATURE_TABS, FALSE
      buildConfigField BOOLEAN, FEATURE_OFFLINE_SYNC, FALSE
      buildConfigField BOOLEAN, FEATURE_FOLLOW_USER_SEARCH, FALSE
      buildConfigField BOOLEAN, FEATURE_STATIONS_SOFT_LAUNCH, FALSE
      buildConfigField BOOLEAN, FEATURE_STATIONS_HOME, FALSE
      buildConfigField BOOLEAN, FEATURE_EVENTLOGGER_AUDIO_V1, FALSE
      buildConfigField BOOLEAN, FEATURE_RECOMMENDED_PLAYER_CONTEXT, FALSE
      buildConfigField BOOLEAN, FEATURE_KILL_CONCURRENT_STREAMING, FALSE
      buildConfigField BOOLEAN, FEATURE_COLLECTIONS, FALSE
      buildConfigField BOOLEAN, FEATURE_DAILY_POLICY_UPDATES, FALSE
      buildConfigField BOOLEAN, FEATURE_DISCOVERY, FALSE
      buildConfigField BOOLEAN, FEATURE_DISCOVERY_RECOMMENDATIONS, FALSE  //FEATURE_DISCOVERY must be enable as well
      buildConfigField BOOLEAN, FEATURE_DISCOVERY_CHARTS, FALSE           //FEATURE_DISCOVERY must be enable as well
      buildConfigField BOOLEAN, FEATURE_NEW_STREAM, FALSE
    }

    release {
      //Feature flags enabled
      buildConfigField BOOLEAN, FEATURE_PLAY_RELATED_TRACKS, TRUE
      buildConfigField BOOLEAN, FEATURE_APPBOY, TRUE
      buildConfigField BOOLEAN, FEATURE_NEW_PROFILE, TRUE

      //Feature flags disabled
      buildConfigField BOOLEAN, FEATURE_TABS, FALSE
      buildConfigField BOOLEAN, FEATURE_PAYMENTS_TEST, FALSE
      buildConfigField BOOLEAN, FEATURE_OFFLINE_SYNC, FALSE
      buildConfigField BOOLEAN, FEATURE_FOLLOW_USER_SEARCH, FALSE
      // When turning this on, make sure the ci does not exclude tests annotated with @StationsTest
      buildConfigField BOOLEAN, FEATURE_STATIONS_SOFT_LAUNCH, FALSE
      buildConfigField BOOLEAN, FEATURE_STATIONS_HOME, FALSE
      buildConfigField BOOLEAN, FEATURE_EVENTLOGGER_AUDIO_V1, FALSE
      buildConfigField BOOLEAN, FEATURE_RECOMMENDED_PLAYER_CONTEXT, FALSE
      buildConfigField BOOLEAN, FEATURE_KILL_CONCURRENT_STREAMING, FALSE
      buildConfigField BOOLEAN, FEATURE_COLLECTIONS, FALSE
      buildConfigField BOOLEAN, FEATURE_DAILY_POLICY_UPDATES, FALSE
      buildConfigField BOOLEAN, FEATURE_DISCOVERY, FALSE
      buildConfigField BOOLEAN, FEATURE_DISCOVERY_RECOMMENDATIONS, FALSE  //FEATURE_DISCOVERY must be enable as well
      buildConfigField BOOLEAN, FEATURE_DISCOVERY_CHARTS, FALSE           //FEATURE_DISCOVERY must be enable as well
      buildConfigField BOOLEAN, FEATURE_NEW_STREAM, FALSE
    }

    releaseNoProguard {
      //Feature flags enabled
      buildConfigField BOOLEAN, FEATURE_PLAY_RELATED_TRACKS, TRUE
      buildConfigField BOOLEAN, FEATURE_APPBOY, TRUE
      buildConfigField BOOLEAN, FEATURE_NEW_PROFILE, TRUE

      //Feature flags disabled
      buildConfigField BOOLEAN, FEATURE_TABS, FALSE
      buildConfigField BOOLEAN, FEATURE_PAYMENTS_TEST, FALSE
      buildConfigField BOOLEAN, FEATURE_OFFLINE_SYNC, FALSE
      buildConfigField BOOLEAN, FEATURE_FOLLOW_USER_SEARCH, FALSE
      buildConfigField BOOLEAN, FEATURE_STATIONS_SOFT_LAUNCH, FALSE
      buildConfigField BOOLEAN, FEATURE_STATIONS_HOME, FALSE
      buildConfigField BOOLEAN, FEATURE_EVENTLOGGER_AUDIO_V1, FALSE
      buildConfigField BOOLEAN, FEATURE_RECOMMENDED_PLAYER_CONTEXT, FALSE
      buildConfigField BOOLEAN, FEATURE_KILL_CONCURRENT_STREAMING, FALSE
      buildConfigField BOOLEAN, FEATURE_COLLECTIONS, FALSE
      buildConfigField BOOLEAN, FEATURE_DAILY_POLICY_UPDATES, FALSE
      buildConfigField BOOLEAN, FEATURE_DISCOVERY, FALSE
      buildConfigField BOOLEAN, FEATURE_DISCOVERY_RECOMMENDATIONS, FALSE  //FEATURE_DISCOVERY must be enable as well
      buildConfigField BOOLEAN, FEATURE_DISCOVERY_CHARTS, FALSE           //FEATURE_DISCOVERY must be enable as well
      buildConfigField BOOLEAN, FEATURE_NEW_STREAM, FALSE
    }

    release_non_play_store {
      //Feature flags enabled
      buildConfigField BOOLEAN, FEATURE_PLAY_RELATED_TRACKS, TRUE
      buildConfigField BOOLEAN, FEATURE_APPBOY, TRUE
      buildConfigField BOOLEAN, FEATURE_NEW_PROFILE, TRUE

      //Feature flags disabled
      buildConfigField BOOLEAN, FEATURE_TABS, FALSE
      buildConfigField BOOLEAN, FEATURE_PAYMENTS_TEST, FALSE
      buildConfigField BOOLEAN, FEATURE_OFFLINE_SYNC, FALSE
      buildConfigField BOOLEAN, FEATURE_FOLLOW_USER_SEARCH, FALSE
      buildConfigField BOOLEAN, FEATURE_STATIONS_SOFT_LAUNCH, FALSE
      buildConfigField BOOLEAN, FEATURE_STATIONS_HOME, FALSE
      buildConfigField BOOLEAN, FEATURE_EVENTLOGGER_AUDIO_V1, FALSE
      buildConfigField BOOLEAN, FEATURE_RECOMMENDED_PLAYER_CONTEXT, FALSE
      buildConfigField BOOLEAN, FEATURE_KILL_CONCURRENT_STREAMING, FALSE
      buildConfigField BOOLEAN, FEATURE_COLLECTIONS, FALSE
      buildConfigField BOOLEAN, FEATURE_DAILY_POLICY_UPDATES, FALSE
      buildConfigField BOOLEAN, FEATURE_DISCOVERY, FALSE
      buildConfigField BOOLEAN, FEATURE_DISCOVERY_RECOMMENDATIONS, FALSE  //FEATURE_DISCOVERY must be enable as well
      buildConfigField BOOLEAN, FEATURE_DISCOVERY_CHARTS, FALSE           //FEATURE_DISCOVERY must be enable as well
      buildConfigField BOOLEAN, FEATURE_NEW_STREAM, FALSE
    }
  }
}
