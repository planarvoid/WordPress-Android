apply plugin: 'com.android.application'

def BOOLEAN = "boolean"
def TRUE = "true"
def FALSE = "false"

//Feature flags
def FEATURE_PAYMENTS_TEST = "FEATURE_PAYMENTS_TEST"
def FEATURE_OFFLINE_SYNC = "FEATURE_OFFLINE_SYNC"
def FEATURE_OFFLINE_SYNC_COLLECTION = "FEATURE_OFFLINE_SYNC_COLLECTION"
def FEATURE_STATIONS_HOME = "FEATURE_STATIONS_HOME"
def FEATURE_PUBLISH_PLAY_EVENTS_TO_TPUB = "FEATURE_PUBLISH_PLAY_EVENTS_TO_TPUB"
def FEATURE_VIDEO_ADS = "FEATURE_VIDEO_ADS"
def FEATURE_SERVE_DEMO_VIDEO_AD = "FEATURE_SERVE_DEMO_VIDEO_AD"
def FEATURE_WAVEFORM_SPRING = "FEATURE_WAVEFORM_SPRING"
def FEATURE_DISCOVERY_RECOMMENDATIONS = "FEATURE_DISCOVERY_RECOMMENDATIONS"
def FEATURE_DISCOVERY_CHARTS = "FEATURE_DISCOVERY_CHARTS"
def FEATURE_PROFILE_NEW_TABS = "FEATURE_PROFILE_NEW_TABS"
def FEATURE_SEARCH_RESULTS_HIGH_TIER = "FEATURE_SEARCH_RESULTS_HIGH_TIER"
def FEATURE_PLAYER_UPSELL_TRACKING = "FEATURE_PLAYER_UPSELL_TRACKING"
def FEATURE_EXPLODE_PLAYLISTS_IN_PLAYQUEUES = "FEATURE_EXPLODE_PLAYLISTS_IN_PLAYQUEUES"
def FEATURE_NEW_NOTIFICATION_SETTINGS = "FEATURE_NEW_NOTIFICATION_SETTINGS"
def FEATURE_AUTO_REFRESH_STREAM = "FEATURE_AUTO_REFRESH_STREAM"
def FEATURE_WEB_UPGRADE_FLOW = "FEATURE_WEB_UPGRADE_FLOW"

android {
  buildTypes {
    alpha {
      //Feature flags enabled
      buildConfigField BOOLEAN, FEATURE_OFFLINE_SYNC, TRUE
      buildConfigField BOOLEAN, FEATURE_OFFLINE_SYNC_COLLECTION, TRUE
      buildConfigField BOOLEAN, FEATURE_SEARCH_RESULTS_HIGH_TIER, TRUE
      buildConfigField BOOLEAN, FEATURE_PLAYER_UPSELL_TRACKING, TRUE
      buildConfigField BOOLEAN, FEATURE_NEW_NOTIFICATION_SETTINGS, TRUE
      buildConfigField BOOLEAN, FEATURE_AUTO_REFRESH_STREAM, TRUE
      buildConfigField BOOLEAN, FEATURE_WEB_UPGRADE_FLOW, TRUE
      buildConfigField BOOLEAN, FEATURE_SERVE_DEMO_VIDEO_AD, TRUE // Does nothing unless FEATURE_VIDEO_ADS is enabled

      //Feature flags disabled
      buildConfigField BOOLEAN, FEATURE_PAYMENTS_TEST, FALSE
      buildConfigField BOOLEAN, FEATURE_STATIONS_HOME, FALSE
      buildConfigField BOOLEAN, FEATURE_PUBLISH_PLAY_EVENTS_TO_TPUB, FALSE
      buildConfigField BOOLEAN, FEATURE_DISCOVERY_CHARTS, FALSE
      buildConfigField BOOLEAN, FEATURE_DISCOVERY_RECOMMENDATIONS, FALSE
      buildConfigField BOOLEAN, FEATURE_VIDEO_ADS, FALSE
      buildConfigField BOOLEAN, FEATURE_WAVEFORM_SPRING, FALSE
      buildConfigField BOOLEAN, FEATURE_PROFILE_NEW_TABS, FALSE
      buildConfigField BOOLEAN, FEATURE_EXPLODE_PLAYLISTS_IN_PLAYQUEUES, FALSE
    }

    beta {
      //Feature flags enabled
      buildConfigField BOOLEAN, FEATURE_PUBLISH_PLAY_EVENTS_TO_TPUB, TRUE
      buildConfigField BOOLEAN, FEATURE_WEB_UPGRADE_FLOW, TRUE

      //Feature flags disabled
      buildConfigField BOOLEAN, FEATURE_PAYMENTS_TEST, FALSE
      buildConfigField BOOLEAN, FEATURE_OFFLINE_SYNC, FALSE
      buildConfigField BOOLEAN, FEATURE_OFFLINE_SYNC_COLLECTION, FALSE
      buildConfigField BOOLEAN, FEATURE_STATIONS_HOME, FALSE
      buildConfigField BOOLEAN, FEATURE_DISCOVERY_RECOMMENDATIONS, FALSE
      buildConfigField BOOLEAN, FEATURE_DISCOVERY_CHARTS, FALSE
      buildConfigField BOOLEAN, FEATURE_VIDEO_ADS, FALSE
      buildConfigField BOOLEAN, FEATURE_SERVE_DEMO_VIDEO_AD, FALSE // Does nothing unless FEATURE_VIDEO_ADS is enabled
      buildConfigField BOOLEAN, FEATURE_WAVEFORM_SPRING, FALSE
      buildConfigField BOOLEAN, FEATURE_PROFILE_NEW_TABS, FALSE
      buildConfigField BOOLEAN, FEATURE_SEARCH_RESULTS_HIGH_TIER, FALSE
      buildConfigField BOOLEAN, FEATURE_PLAYER_UPSELL_TRACKING, FALSE
      buildConfigField BOOLEAN, FEATURE_EXPLODE_PLAYLISTS_IN_PLAYQUEUES, FALSE
      buildConfigField BOOLEAN, FEATURE_NEW_NOTIFICATION_SETTINGS, FALSE
      buildConfigField BOOLEAN, FEATURE_AUTO_REFRESH_STREAM, FALSE
    }

    debug {
      //Feature flags enabled
      buildConfigField BOOLEAN, FEATURE_STATIONS_HOME, TRUE
      buildConfigField BOOLEAN, FEATURE_OFFLINE_SYNC, TRUE
      buildConfigField BOOLEAN, FEATURE_OFFLINE_SYNC_COLLECTION, TRUE
      buildConfigField BOOLEAN, FEATURE_SEARCH_RESULTS_HIGH_TIER, TRUE
      buildConfigField BOOLEAN, FEATURE_WEB_UPGRADE_FLOW, TRUE
      buildConfigField BOOLEAN, FEATURE_PLAYER_UPSELL_TRACKING, TRUE
      buildConfigField BOOLEAN, FEATURE_NEW_NOTIFICATION_SETTINGS, TRUE
      buildConfigField BOOLEAN, FEATURE_AUTO_REFRESH_STREAM, TRUE
      buildConfigField BOOLEAN, FEATURE_SERVE_DEMO_VIDEO_AD, TRUE // Does nothing unless FEATURE_VIDEO_ADS is enabled

      //Feature flags disabled
      buildConfigField BOOLEAN, FEATURE_PAYMENTS_TEST, FALSE
      buildConfigField BOOLEAN, FEATURE_PUBLISH_PLAY_EVENTS_TO_TPUB, FALSE
      buildConfigField BOOLEAN, FEATURE_DISCOVERY_RECOMMENDATIONS, FALSE
      buildConfigField BOOLEAN, FEATURE_DISCOVERY_CHARTS, FALSE
      buildConfigField BOOLEAN, FEATURE_VIDEO_ADS, FALSE
      buildConfigField BOOLEAN, FEATURE_WAVEFORM_SPRING, FALSE
      buildConfigField BOOLEAN, FEATURE_PROFILE_NEW_TABS, FALSE
      buildConfigField BOOLEAN, FEATURE_EXPLODE_PLAYLISTS_IN_PLAYQUEUES, FALSE
    }

    end2end {
      //Feature flags enabled
      buildConfigField BOOLEAN, FEATURE_PAYMENTS_TEST, TRUE
      buildConfigField BOOLEAN, FEATURE_WEB_UPGRADE_FLOW, TRUE

      //Feature flags disabled
      buildConfigField BOOLEAN, FEATURE_OFFLINE_SYNC, FALSE
      buildConfigField BOOLEAN, FEATURE_OFFLINE_SYNC_COLLECTION, FALSE
      buildConfigField BOOLEAN, FEATURE_STATIONS_HOME, FALSE
      buildConfigField BOOLEAN, FEATURE_PUBLISH_PLAY_EVENTS_TO_TPUB, FALSE
      buildConfigField BOOLEAN, FEATURE_DISCOVERY_RECOMMENDATIONS, FALSE
      buildConfigField BOOLEAN, FEATURE_DISCOVERY_CHARTS, FALSE
      buildConfigField BOOLEAN, FEATURE_VIDEO_ADS, FALSE
      buildConfigField BOOLEAN, FEATURE_SERVE_DEMO_VIDEO_AD, FALSE // Does nothing unless FEATURE_VIDEO_ADS is enabled
      buildConfigField BOOLEAN, FEATURE_WAVEFORM_SPRING, FALSE
      buildConfigField BOOLEAN, FEATURE_PROFILE_NEW_TABS, FALSE
      buildConfigField BOOLEAN, FEATURE_SEARCH_RESULTS_HIGH_TIER, FALSE
      buildConfigField BOOLEAN, FEATURE_PLAYER_UPSELL_TRACKING, FALSE
      buildConfigField BOOLEAN, FEATURE_EXPLODE_PLAYLISTS_IN_PLAYQUEUES, FALSE
      buildConfigField BOOLEAN, FEATURE_NEW_NOTIFICATION_SETTINGS, FALSE
      buildConfigField BOOLEAN, FEATURE_AUTO_REFRESH_STREAM, FALSE
    }

    release {
      //Feature flags enabled
      buildConfigField BOOLEAN, FEATURE_WEB_UPGRADE_FLOW, TRUE

      //Feature flags disabled
      buildConfigField BOOLEAN, FEATURE_PAYMENTS_TEST, FALSE
      buildConfigField BOOLEAN, FEATURE_OFFLINE_SYNC, FALSE
      buildConfigField BOOLEAN, FEATURE_OFFLINE_SYNC_COLLECTION, FALSE
      // When turning this on, make sure the ci does not exclude tests annotated with @StationsTest
      buildConfigField BOOLEAN, FEATURE_STATIONS_HOME, FALSE
      buildConfigField BOOLEAN, FEATURE_DISCOVERY_RECOMMENDATIONS, FALSE
      buildConfigField BOOLEAN, FEATURE_DISCOVERY_CHARTS, FALSE
      buildConfigField BOOLEAN, FEATURE_VIDEO_ADS, FALSE
      buildConfigField BOOLEAN, FEATURE_SERVE_DEMO_VIDEO_AD, FALSE // Does nothing unless FEATURE_VIDEO_ADS is enabled
      buildConfigField BOOLEAN, FEATURE_PUBLISH_PLAY_EVENTS_TO_TPUB, FALSE
      buildConfigField BOOLEAN, FEATURE_WAVEFORM_SPRING, FALSE
      buildConfigField BOOLEAN, FEATURE_PROFILE_NEW_TABS, FALSE
      buildConfigField BOOLEAN, FEATURE_SEARCH_RESULTS_HIGH_TIER, FALSE
      buildConfigField BOOLEAN, FEATURE_PLAYER_UPSELL_TRACKING, FALSE
      buildConfigField BOOLEAN, FEATURE_EXPLODE_PLAYLISTS_IN_PLAYQUEUES, FALSE
      buildConfigField BOOLEAN, FEATURE_NEW_NOTIFICATION_SETTINGS, FALSE
      buildConfigField BOOLEAN, FEATURE_AUTO_REFRESH_STREAM, FALSE
    }

    releaseNoProguard {
      //Feature flags enabled
      buildConfigField BOOLEAN, FEATURE_WEB_UPGRADE_FLOW, TRUE

      //Feature flags disabled
      buildConfigField BOOLEAN, FEATURE_PAYMENTS_TEST, FALSE
      buildConfigField BOOLEAN, FEATURE_OFFLINE_SYNC, FALSE
      buildConfigField BOOLEAN, FEATURE_OFFLINE_SYNC_COLLECTION, FALSE
      buildConfigField BOOLEAN, FEATURE_STATIONS_HOME, FALSE
      buildConfigField BOOLEAN, FEATURE_DISCOVERY_RECOMMENDATIONS, FALSE
      buildConfigField BOOLEAN, FEATURE_DISCOVERY_CHARTS, FALSE
      buildConfigField BOOLEAN, FEATURE_VIDEO_ADS, FALSE
      buildConfigField BOOLEAN, FEATURE_SERVE_DEMO_VIDEO_AD, FALSE // Does nothing unless FEATURE_VIDEO_ADS is enabled
      buildConfigField BOOLEAN, FEATURE_PUBLISH_PLAY_EVENTS_TO_TPUB, FALSE
      buildConfigField BOOLEAN, FEATURE_WAVEFORM_SPRING, FALSE
      buildConfigField BOOLEAN, FEATURE_PROFILE_NEW_TABS, FALSE
      buildConfigField BOOLEAN, FEATURE_SEARCH_RESULTS_HIGH_TIER, FALSE
      buildConfigField BOOLEAN, FEATURE_PLAYER_UPSELL_TRACKING, FALSE
      buildConfigField BOOLEAN, FEATURE_EXPLODE_PLAYLISTS_IN_PLAYQUEUES, FALSE
      buildConfigField BOOLEAN, FEATURE_NEW_NOTIFICATION_SETTINGS, FALSE
      buildConfigField BOOLEAN, FEATURE_AUTO_REFRESH_STREAM, FALSE
    }

    release_non_play_store {
      //Feature flags enabled
      buildConfigField BOOLEAN, FEATURE_WEB_UPGRADE_FLOW, TRUE

      //Feature flags disabled
      buildConfigField BOOLEAN, FEATURE_PAYMENTS_TEST, FALSE
      buildConfigField BOOLEAN, FEATURE_OFFLINE_SYNC, FALSE
      buildConfigField BOOLEAN, FEATURE_OFFLINE_SYNC_COLLECTION, FALSE
      buildConfigField BOOLEAN, FEATURE_STATIONS_HOME, FALSE
      buildConfigField BOOLEAN, FEATURE_DISCOVERY_RECOMMENDATIONS, FALSE
      buildConfigField BOOLEAN, FEATURE_DISCOVERY_CHARTS, FALSE
      buildConfigField BOOLEAN, FEATURE_VIDEO_ADS, FALSE
      buildConfigField BOOLEAN, FEATURE_SERVE_DEMO_VIDEO_AD, FALSE // Does nothing unless FEATURE_VIDEO_ADS is enabled
      buildConfigField BOOLEAN, FEATURE_PUBLISH_PLAY_EVENTS_TO_TPUB, FALSE
      buildConfigField BOOLEAN, FEATURE_WAVEFORM_SPRING, FALSE
      buildConfigField BOOLEAN, FEATURE_PROFILE_NEW_TABS, FALSE
      buildConfigField BOOLEAN, FEATURE_SEARCH_RESULTS_HIGH_TIER, FALSE
      buildConfigField BOOLEAN, FEATURE_PLAYER_UPSELL_TRACKING, FALSE
      buildConfigField BOOLEAN, FEATURE_EXPLODE_PLAYLISTS_IN_PLAYQUEUES, FALSE
      buildConfigField BOOLEAN, FEATURE_NEW_NOTIFICATION_SETTINGS, FALSE
      buildConfigField BOOLEAN, FEATURE_AUTO_REFRESH_STREAM, FALSE
    }
  }
}
