apply plugin: 'com.android.library'

android {
  compileSdkVersion rootProject.ext.androidCompileSdkVersion
  buildToolsVersion rootProject.ext.androidBuildToolsVersion

  defaultConfig {
    targetSdkVersion rootProject.ext.androidTargetSdkVersion
    minSdkVersion rootProject.ext.androidMinSdkVersion
  }

  compileOptions {
    sourceCompatibility JavaVersion.VERSION_1_7
    targetCompatibility JavaVersion.VERSION_1_7
  }

  buildTypes {
    release {
      minifyEnabled false
    }
  }

  packagingOptions {
    exclude 'LICENSE.txt'
    exclude 'META-INF/ASL2.0'
    exclude 'META-INF/DEPENDENCIES'
    exclude 'META-INF/LICENSE'
    exclude 'META-INF/NOTICE'
    exclude 'META-INF/services/javax.annotation.processing.Processor'
    exclude 'META-INF/rxjava.properties'
  }

  testOptions {
    unitTests.returnDefaultValues = true

    // This allows us see tests execution progress in the output on the CI.
    unitTests.all {
      testLogging {
        events 'skipped', 'failed'
        exceptionFormat 'full'
      }
    }
  }
}

dependencies {
  provided libraries.dagger
  provided libraries.crashlytics

  compile libraries.androidKitCore
  compile (libraries.lightCycle) {
    exclude group: 'com.android.support', module: 'preference-v7'
  }
  compile libraries.lintlib
  compile libraries.androidSupportAnnotations
  compile libraries.androidRecyclerView
  compile libraries.rxAndroid
  compile libraries.rxJava
  compile libraries.rxJava2
  compile libraries.rxJavaInterop

  testCompile libraries.androidSupportLibrary
  testCompile unitTestLibraries.junit
  testCompile unitTestLibraries.mockito
  testCompile unitTestLibraries.assertj
  testCompile unitTestLibraries.equalsVerifier
  testCompile unitTestLibraries.robolectric
}
