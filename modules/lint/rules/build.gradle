buildscript {
  dependencies {
    classpath gradlePlugins.apt
    classpath gradlePlugins.memento
  }
}

apply plugin: 'java'
apply plugin: 'com.soundcloud.memento'
apply plugin: 'net.ltgt.apt'

targetCompatibility = JavaVersion.VERSION_1_8
sourceCompatibility = JavaVersion.VERSION_1_8

configurations {
  lintChecks
}

def libraries = rootProject.ext.libraries
def unitTestLibraries = rootProject.ext.unitTestLibraries

test {
  testLogging {
    events 'skipped', 'failed'
    exceptionFormat 'full'
  }
}

dependencies {
  apt libraries.mementoCompiler
  compileOnly libraries.mementoAnnotation
  compile libraries.lintApi
  compile libraries.lintChecks

  testCompile unitTestLibraries.lint
  testCompile unitTestLibraries.lintTests
  testCompile unitTestLibraries.assertj
  testCompile unitTestLibraries.junit

  lintChecks files(jar)
}

sourceSets {
  main.resources.srcDir 'src/main/java'
  test.resources.srcDir 'src/test/java'
}
