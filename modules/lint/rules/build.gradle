apply plugin: 'java'

targetCompatibility = JavaVersion.VERSION_1_8
sourceCompatibility = JavaVersion.VERSION_1_8

configurations {
  lintChecks
}

def libraries = rootProject.ext.libraries
def unitTestLibraries = rootProject.ext.unitTestLibraries

dependencies {
  compile libraries.lintApi
  compile libraries.lintChecks

  testCompile unitTestLibraries.lint
  testCompile unitTestLibraries.lintTests
  testCompile unitTestLibraries.assertj
  testCompile unitTestLibraries.junit

  lintChecks files(jar)
}

sourceSets {
  main.resources.srcDir 'src/main/java'
  test.resources.srcDir 'src/test/java'
}

test {
  maxParallelForks = Runtime.runtime.availableProcessors() / 2
}

jar {
  manifest {
    attributes 'Lint-Registry': 'com.soundcloud.android.lint.rules.SoundCloudIssueRegistry'
  }
}
