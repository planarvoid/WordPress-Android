apply plugin: 'com.android.library'

android {
  compileSdkVersion rootProject.ext.androidCompileSdkVersion
  buildToolsVersion rootProject.ext.androidBuildToolsVersion

  defaultConfig {
    minSdkVersion rootProject.ext.androidMinSdkVersion
    targetSdkVersion rootProject.ext.androidTargetSdkVersion
  }

  compileOptions {
    sourceCompatibility JavaVersion.VERSION_1_7
    targetCompatibility JavaVersion.VERSION_1_7
  }

  packagingOptions {
    exclude 'LICENSE.txt'
    exclude 'META-INF/ASL2.0'
    exclude 'META-INF/DEPENDENCIES'
    exclude 'META-INF/LICENSE'
    exclude 'META-INF/NOTICE'
    exclude 'META-INF/services/javax.annotation.processing.Processor'
    exclude 'META-INF/rxjava.properties'
  }

  testOptions {
    unitTests.all {
      testLogging {
        events 'skipped', 'failed'
        exceptionFormat 'full'
      }
    }
  }
}

dependencies {
  annotationProcessor libraries.autoValue
  provided libraries.autoValue
  provided libraries.androidKit

  compile libraries.jacksonAnnotations
  compile libraries.jacksonDataBind
  compile libraries.jacksonCore
  compile libraries.jacksonYaml

  compile(acceptanceTestLibraries.wiremock) {
    exclude group: 'org.apache.httpcomponents', module: 'httpclient'
    exclude group: 'asm', module: 'asm'
    exclude group: 'org.ow2.asm'
    exclude group: 'org.json', module: 'json'
    exclude group: 'com.fasterxml.jackson.core', module: 'jackson-core'
    exclude group: 'com.fasterxml.jackson.core', module: 'jackson-annotations'
    exclude group: 'com.fasterxml.jackson.core', module: 'jackson-databind'
    exclude group: 'org.hamcrest', module: 'hamcrest-core'
  }
  compile acceptanceTestLibraries.httpComponents // needed for wiremock

  testCompile unitTestLibraries.junit
  testCompile unitTestLibraries.assertj
  testCompile unitTestLibraries.mockito
}
