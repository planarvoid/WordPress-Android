apply plugin: 'java'
apply plugin: 'maven-publish'
apply plugin: 'provided-base'
apply plugin: 'pmd'


dependencies {
  provided "com.google.android:android:4.1.1.4"
  provided "com.google.guava:guava:16.0"
  compile project(":core-utils")
  testCompile "junit:junit:4.11"
  testCompile "org.mockito:mockito-core:1.9.5"
  testCompile "org.robolectric:robolectric:2.2"
  testCompile "org.apache.commons:commons-io:1.3.2"
}

test {
  testLogging {
    showStandardStreams = true
    showStackTraces = true
    exceptionFormat = "full"
  }
}


task sourceJar(type: Jar) {
  from sourceSets.main.allJava
}

publishing {
  publications {
    maven(MavenPublication) {
      from components.java

      version "1.0"
      artifactId "com.soundcloud.android"
      groupId "migf"

      artifact sourceJar {
        classifier "sources"
      }
    }
  }

  repositories {
    maven {
      url "http://maven.int.s-cloud.net/content/repositories/releases"
    }
  }

}




pmd {
  consoleOutput true
  ruleSetFiles = files("$project.path/../../../app/static-analysis/pmd.xml")
  sourceSets = [sourceSets.main]
}

